{"version":3,"sources":["comment.js"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAA;AAClC,IAAI,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC;;;AAAA,AAGvC,OAAO,CAAC,IAAI,GAAG,WAAW,IAAI,EAAE;AAC9B,MAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAA;AACxC,MAAI,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAA;;AAE5B,MAAI,QAAQ,CAAC,GAAG,EAAE;;AAEhB,QAAI,OAAO,GAAG,MAAM,OAAO,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,EAAC,CAAC,CAAC,IAAI,EAAE,CAAA;AAC/D,QAAI,KAAK,GAAG;AACV,UAAI,EAAE,QAAQ,CAAC,IAAI;AACnB,QAAE,EAAE,QAAQ,CAAC,GAAG;AAChB,aAAO,EAAE,QAAQ,CAAC,OAAO;KAC1B,CAAA;AACD,WAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;AACzB,UAAM,OAAO,CAAC,IAAI,EAAE,CAAA;AACpB,QAAI,CAAC,IAAI,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,CAAA;GAC3B,MACI;AACH,QAAI,OAAO,GAAG,IAAI,OAAO,CAAC;AACtB,WAAK,EAAC,QAAQ,CAAC,KAAK;AACpB,UAAI,EAAC,QAAQ,CAAC,IAAI;AAClB,aAAO,EAAC,QAAQ,CAAC,OAAO;KAC3B,CAAC,CAAA;AACF,UAAM,OAAO,CAAC,IAAI,EAAE,CAAA;AACpB,QAAI,CAAC,IAAI,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,CAAA;GAC3B;CACF,CAAA","file":"comment-compiled.js","sourcesContent":["'use strict'\r\n\r\nvar mongoose = require('mongoose')\r\nvar Comment = mongoose.model('Comment')\r\n\r\n// comment\r\nexports.save = function *(next) {\r\n  var _comment = this.request.body.comment\r\n  var movieId = _comment.movie\r\n\r\n  if (_comment.cid) {\r\n\r\n    let comment = yield Comment.findOne({_id: _comment.cid}).exec()\r\n    var reply = {\r\n      from: _comment.from,\r\n      to: _comment.tid,\r\n      content: _comment.content\r\n    }\r\n    comment.reply.push(reply)\r\n    yield comment.save()\r\n    this.body = { success :1 }\r\n  }\r\n  else {\r\n    var comment = new Comment({\r\n        movie:_comment.movie,\r\n        from:_comment.from,\r\n        content:_comment.content\r\n    })\r\n    yield comment.save()\r\n    this.body = { success :1 }\r\n  }\r\n}"]}